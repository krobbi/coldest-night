# NightScript Version 3.
# Enter Hub
# Cutscene for entering test/area_bx/hub.

include "enter_dialog";

const COUNT_FLAG = "test/area_bx/archival_unit_count";
const TERMINAL_FLAG = "test/area_hub/hub/seen_terminal";
const NORTH_ALMOST_FLAG = "test/area_bx/hub/seen_north_almost";
const NORTH_COMPLETE_FLAG = "test/area_bx/hub/seen_north_complete";
const WEST_ALMOST_FLAG = "test/area_bx/hub/seen_west_almost";
const WEST_COMPLETE_FLAG = "test/area_bx/hub/seen_west_complete";

const NORTH_TOTAL = 10;
const WEST_TOTAL = NORTH_TOTAL + 6 + 1;

func has_dialog(flag, count){
	if not get_flag(flag) and get_flag(COUNT_FLAG) == count {
		freeze();
		show();
		return set_flag(flag, 1);
	} else {
		return 0;
	}
}

if has_dialog(TERMINAL_FLAG, get_flag(COUNT_FLAG)) {
	terminal_dialog();
	hide();
	
	path("player", "Terminal");
	run_paths();
	await_paths();
	face("player", -90);
	sleep(1000);
	
	show();
	terminal_reached_dialog();
	hide();
	unfreeze();
} else if has_dialog(NORTH_ALMOST_FLAG, NORTH_TOTAL - 1) {
	north_almost_dialog();
	hide();
	unfreeze();
} else if has_dialog(NORTH_COMPLETE_FLAG, NORTH_TOTAL) {
	north_complete_dialog();
	hide();
	unfreeze();
} else if has_dialog(WEST_ALMOST_FLAG, WEST_TOTAL - 1) {
	west_almost_dialog();
	hide();
	unfreeze();
} else if has_dialog(WEST_COMPLETE_FLAG, WEST_TOTAL) {
	west_complete_dialog();
	hide();
	unfreeze();
}

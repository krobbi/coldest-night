# NightScript Version 3.
# Enter Hub
# Cutscene for entering test/area_bx/hub.

include "enter_dialog";

const COUNT_FLAG = "test/area_bx/archival_unit_count";
const TERMINAL_FLAG = "test/area_hub/hub/seen_terminal";
const NORTH_ALMOST_FLAG = "test/area_bx/hub/seen_north_almost";
const NORTH_COMPLETE_FLAG = "test/area_bx/hub/seen_north_complete";
const WEST_ALMOST_FLAG = "test/area_bx/hub/seen_west_almost";
const WEST_COMPLETE_FLAG = "test/area_bx/hub/seen_west_complete";

const NORTH_TOTAL = 10;
const WEST_TOTAL = NORTH_TOTAL + 6 + 1;

func hasDialog(flag, count){
	if !getFlag(flag) && getFlag(COUNT_FLAG) == count {
		freeze();
		show();
		return setFlag(flag, 1);
	}
	
	return 0;
}

if hasDialog(TERMINAL_FLAG, getFlag(COUNT_FLAG)) {
	enterHubTerminalDialog();
	hide();
	
	path("player", "Terminal");
	runPaths();
	awaitPaths();
	face("player", -90);
	sleep(1000);
	
	show();
	enterHubTerminalReachedDialog();
	hide();
	unfreeze();
} else if hasDialog(NORTH_ALMOST_FLAG, NORTH_TOTAL - 1) {
	enterHubNorthAlmostDialog();
	hide();
	unfreeze();
} else if hasDialog(NORTH_COMPLETE_FLAG, NORTH_TOTAL) {
	enterHubNorthCompleteDialog();
	hide();
	unfreeze();
} else if hasDialog(WEST_ALMOST_FLAG, WEST_TOTAL - 1) {
	enterHubWestAlmostDialog();
	hide();
	unfreeze();
} else if hasDialog(WEST_COMPLETE_FLAG, WEST_TOTAL) {
	enterHubWestCompleteDialog();
	hide();
	unfreeze();
}
